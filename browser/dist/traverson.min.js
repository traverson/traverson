!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.traverson=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a){null==a&&(a=""),this.id=a}function d(a){return new c(a)}var e=!1;c.prototype.enable=function(){this.enabled=!0},c.prototype.debug=function(a){e&&console.log(this.id+"/debug: "+a)},c.prototype.info=function(a){e&&console.log(this.id+"/info: "+a)},c.prototype.warn=function(a){e&&console.log(this.id+"/warn: "+a)},c.prototype.error=function(a){e&&console.log(this.id+"/error: "+a)},d.enable=function(){e=!0},b.exports=d},{}],2:[function(a,b){"use strict";b.exports={isArray:function(a){return null==a?!1:"[object Array]"===Object.prototype.toString.call(a)}}},{}],3:[function(a,b){"use strict";function c(){}function d(a,b){return b=b||{},e(a,b),f(a,b),g(a,b),h(a,b),i(a,b),a}function e(a,b){var c=b.qs;null!=c&&(a=a.query(c))}function f(a,b){var c=b.headers;null!=c&&(a=a.set(c))}function g(a,b){var c=b.auth;null!=c&&(a=a.auth(c.user||c.username,c.pass||c.password))}function h(a,b){if(null!=b){var c=b.body;null!=c&&(a=a.send(c))}}function i(a,b){if(null!=b){var c=b.form;null!=c&&(a=a.send(c),a=a.set("Content-Type","application/x-www-form-urlencoded"))}}function j(a){return a.body=a.text,a.statusCode=a.status,a}function k(a){return function(b,c){return b?a(b):void a(null,j(c))}}var l=a("superagent");c.prototype.get=function(a,b,c){return d(l.get(a),b).end(k(c))},c.prototype.post=function(a,b,c){return d(l.post(a),b).end(k(c))},c.prototype.put=function(a,b,c){return d(l.put(a),b).end(k(c))},c.prototype.patch=function(a,b,c){return d(l.patch(a),b).end(k(c))},c.prototype.del=function(a,b,c){return d(l.del(a),b).end(k(c))},b.exports=new c},{superagent:18}],4:[function(a,b){"use strict";var c={startsWith:function(a,b){return""===b?!0:null==a||null==b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(0,b.length)===b)},endsWith:function(a,b){return""===b?!0:null==a||null==b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(a.length-b.length)===b)},splice:function(a,b,d,e){var f=c.chars(a);return f.splice(~~b,~~d,e),f.join("")},contains:function(a,b){return""===b?!0:null==a?!1:-1!==String(a).indexOf(b)},chars:function(a){return null==a?[]:String(a).split("")}};b.exports=c},{}],5:[function(a,b,c){"use strict";var d=a("resolve-url");c.resolve=function(a,b){return d(a,b)}},{"resolve-url":17}],6:[function(a,b){"use strict";function c(a){this.mediaType=a||q.CONTENT_NEGOTIATION;var b=this._createAdapter(this.mediaType);this.walker=new p(b),this.request=this.walker.request=l,this.finalAction=new n(this.walker)}function d(a,b){for(var c=0;c<Math.max(a.length,b.length);c++)a[c]=r(a[c],b[c])}function e(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=r(b[d],a);return c}function f(a,b){for(var c=0;c<a.length;c++)r(a[c],b)}function g(a){return{abort:function(){a.walker.abort()}}}function h(a){return m.isArray(a)?j(a):"object"==typeof a?i(a):a}function i(a){return r(null,a)}function j(a){return a?a.slice(0):a}var k=a("minilog"),l=a("request"),m=a("util"),n=a("./final_action"),o=a("./media_type_registry"),p=a("./walker"),q=a("./media_types"),r=a("./merge_recursive"),s=k("traverson");c.prototype._createAdapter=function(a){var b=o.get(a);if(!b)throw new Error("Unknown or unsupported media type: "+a);return s.debug("creating new "+b.name),new b(s)},c.prototype.newRequest=function(){var a=new c(this.getMediaType());return a.walker.contentNegotiation=this.doesContentNegotiation(),a.from(j(this.getFrom())),a.withTemplateParameters(h(this.getTemplateParameters())),a.withRequestOptions(h(this.getRequestOptions())),a.withRequestLibrary(this.getRequestLibrary()),a.parseResponseBodiesWith(this.getJsonParser()),a.resolveRelative(this.doesResolveRelative()),a},c.prototype.setMediaType=function(a){return this.mediaType=a||q.CONTENT_NEGOTIATION,this.walker.adapter=this._createAdapter(a),this.walker.contentNegotiation=a===q.CONTENT_NEGOTIATION,this},c.prototype.json=function(){return this.setMediaType(q.JSON),this},c.prototype.jsonHal=function(){return this.setMediaType(q.JSON_HAL),this},c.prototype.useContentNegotiation=function(){return this.setMediaType(q.CONTENT_NEGOTIATION),this.walker.contentNegotiation=!0,this},c.prototype.from=function(a){return this.walker.startUri=a,this},c.prototype.follow=function(){return this.walker.links=1===arguments.length&&m.isArray(arguments[0])?arguments[0]:Array.prototype.slice.apply(arguments),this},c.prototype.walk=c.prototype.follow,c.prototype.withTemplateParameters=function(a){return this.walker.templateParameters=a,this},c.prototype.withRequestOptions=function(a){return this.walker.requestOptions=a,this},c.prototype.addRequestOptions=function(a){return m.isArray(this.walker.requestOptions)&&m.isArray(a)?d(this.walker.requestOptions,a):"object"==typeof this.walker.requestOptions&&m.isArray(a)?this.walker.requestOptions=e(this.walker.requestOptions,a):m.isArray(this.walker.requestOptions)&&"object"==typeof a?f(this.walker.requestOptions,a):r(this.walker.requestOptions,a),this},c.prototype.withRequestLibrary=function(a){return this.walker.request=this.request=a,this},c.prototype.parseResponseBodiesWith=function(a){return this.walker.parseJson=a,this},c.prototype.resolveRelative=function(a){return("undefined"==typeof a||null===a)&&(a=!0),this.walker.resolveRelative=!!a,this},c.prototype.getMediaType=function(){return this.mediaType},c.prototype.getFrom=function(){return this.walker.startUri},c.prototype.getTemplateParameters=function(){return this.walker.templateParameters},c.prototype.getRequestOptions=function(){return this.walker.requestOptions},c.prototype.getRequestLibrary=function(){return this.walker.request},c.prototype.getJsonParser=function(){return this.walker.parseJson},c.prototype.doesResolveRelative=function(){return this.walker.resolveRelative},c.prototype.doesContentNegotiation=function(){return this.walker.contentNegotiation},c.prototype.get=function(a){var b=this;return this.walker.walk(function(c,d,e){return s.debug("walker.walk returned"),c?a(c,e?e.response:null,e?e.uri:null):void b.finalAction.get(d,a)}),g(this)},c.prototype.getResource=function(a){var b=this;return this.walker.walk(function(c,d,e){return s.debug("walker.walk returned"),c?a(c,e?e.response:null,e?e.uri:null):void b.finalAction.getResource(d,a)}),g(this)},c.prototype.getUri=function(a){var b=this;return this.walker.walk(function(c,d,e){return s.debug("walker.walk returned"),c?a(c,e?e.response:null,e?e.uri:null):void b.finalAction.getUri(d,a)}),g(this)},c.prototype.post=function(a,b){return this.finalAction.walkAndExecute(a,this.request,this.getRequestOptions(),this.request.post,b),g(this)},c.prototype.put=function(a,b){return this.finalAction.walkAndExecute(a,this.request,this.getRequestOptions(),this.request.put,b),g(this)},c.prototype.patch=function(a,b){return this.finalAction.walkAndExecute(a,this.request,this.getRequestOptions(),this.request.patch,b),g(this)},c.prototype["delete"]=function(a){return this.finalAction.walkAndExecute(null,this.request,this.getRequestOptions(),this.request.del,a),g(this)},c.prototype.del=c.prototype["delete"],b.exports=c},{"./final_action":7,"./media_type_registry":9,"./media_types":10,"./merge_recursive":11,"./walker":13,minilog:1,request:3,util:2}],7:[function(a,b){"use strict";function c(a){this.walker=a}var d=a("minilog"),e=d("traverson"),f=a("util");c.prototype.get=function(a,b){e.debug("next step: "+JSON.stringify(a,null,2)),this.walker.process(a,function(a,c){return e.debug("walker.process returned"),a?b(a,c?c.response:null,c?c.uri:null):(!c.response&&c.doc&&(e.debug("faking HTTP response for embedded resource"),c.response={statusCode:200,body:JSON.stringify(c.doc),remark:"This is not an actual HTTP response. The resource you requested was an embedded resource, so no HTTP request was made to acquire it."}),void b(null,c.response))})},c.prototype.getResource=function(a,b){var c=this;e.debug("next step: "+JSON.stringify(a)),this.walker.process(a,function(a,d){if(e.debug("walker.process returned"),a)return b(a,d?d.response:null,d?d.uri:null);if(d.doc)return b(null,d.doc);var f;try{return c.walker.checkHttpStatus(d),f=c.walker.parse(d),b(null,f)}catch(g){return b(g,g.doc)}})},c.prototype.getUri=function(a,b){var c=this;return e.debug("returning uri"),a.uri?b(null,a.uri):a.doc&&a.doc._links&&a.doc._links.self&&a.doc._links.self.href?b(null,c.walker.startUri+a.doc._links.self.href):b(new Error('You requested an URI but the last resource is an embedded resource and has no URI of its own (that is, it has no link with rel="self"'))},c.prototype.walkAndExecute=function(a,b,c,d,g){var h=this;this.walker.walk(function(i,j,k){if(e.debug("walker.walk returned"),i)return g(i,k?k.response:null,k?k.uri:null);if(e.debug("aborted: "+h.walker.aborted),h.walker.aborted&&(e.debug("link traversal aborted"),!h.callbackHasBeenCalledAfterAbort))return e.debug("calling callback with error"),h.callbackHasBeenCalledAfterAbort=!0,g(new Error("Link traversal process has been aborted."),k?k.response:null,k?k.uri:null);var l=c;f.isArray(c)&&(l=c[j.index]||{}),e.debug("executing final request with step: "+JSON.stringify(j)),e.debug("options: "+JSON.stringify(l)),h.executeRequest(j.uri,b,l,d,a,g)})},c.prototype.executeRequest=function(a,b,c,d,f,g){var h=this;f&&(c.body=JSON.stringify(f)),e.debug("request to "+a+" with options "+JSON.stringify(c)),this.walker.currentRequest=d.call(b,a,c,function(b,c){return e.debug("request to "+a+" succeeded"),b?b.message&&"timeout of undefinedms exceeded"===b.message&&!h.walker.callbackHasBeenCalledAfterAbort?(h.walker.callbackHasBeenCalledAfterAbort=!0,g(new Error("Link traversal process has been aborted."))):g(b,c,a):g(null,c,a)}),this.walker.registerAbortListener(g)},b.exports=c},{minilog:1,util:2}],8:[function(a,b){"use strict";function c(a){this.log=a}var d=a("JSONPath"),e=(a("minilog"),a("underscore.string")),f=d.eval;c.prototype.findNextStep=function(a,b){this.log.debug("extracting link "+b+" from "+JSON.stringify(a));if(this.testJSONPath(b))return{uri:this.resolveJSONPath(b,a)};if(a[b])return{uri:a[b]};throw new Error("Could not find property "+b+" in document:\n"+JSON.stringify(a))},c.prototype.testJSONPath=function(a){return e.startsWith(a,"$.")||e.startsWith(a,"$[")},c.prototype.resolveJSONPath=function(a,b){var c=f(b,a);if(1===c.length){var d=c[0];if(!d)throw new Error("JSONPath expression "+a+" was resolved but the result was null, undefined or an empty string in document:\n"+JSON.stringify(b));return d}throw new Error(c.length>1?"JSONPath expression "+a+" returned more than one match in document:\n"+JSON.stringify(b):"JSONPath expression "+a+" returned no match in document:\n"+JSON.stringify(b))},b.exports=c},{JSONPath:14,minilog:1,"underscore.string":4}],9:[function(a,b,c){"use strict";var d=a("./media_types"),e={};c.register=function(a,b){e[a]=b},c.get=function(a){return e[a]},c.register(d.CONTENT_NEGOTIATION,a("./negotiation_adapter")),c.register(d.JSON,a("./json_adapter"))},{"./json_adapter":8,"./media_types":10,"./negotiation_adapter":12}],10:[function(a,b){"use strict";b.exports={CONTENT_NEGOTIATION:"content-negotiation",JSON:"application/json",JSON_HAL:"application/hal+json"}},{}],11:[function(a,b){"use strict";function c(a,b){!a&&b&&(a={});for(var d in b)b.hasOwnProperty(d)&&("object"==typeof b[d]?(a[d]&&"object"==typeof a[d]||(a[d]={}),c(a[d],b[d])):"function"!=typeof b[d]&&(a[d]=b[d]));return a}b.exports=c},{}],12:[function(a,b){"use strict";function c(){}c.prototype.findNextStep=function(){throw new Error("Content negotiation did not happen")},b.exports=c},{}],13:[function(a,b){"use strict";function c(a){this.adapter=a||new k(m),this.contentNegotiation=!0,this.links=[],this.requestOptions={},this.parseJson=JSON.parse,this.resolveRelative=!1,this.aborted=!1,this.callbackHasBeenCalledAfterAbort=!1}function d(a,b,c){var d=new Error("HTTP GET for "+a+" resulted in HTTP status code "+b+".");d.name="HTTPError",d.uri=a,d.httpStatus=b,d.body=c;try{d.doc=JSON.parse(c)}catch(e){}return d}function e(a,b){var c=new Error("The document at "+a+" could not be parsed as JSON: "+b);return c.name="JSONError",c.uri=a,c.body=b,c}var f=a("minilog"),g=a("underscore.string"),h=a("url-template"),i=a("url"),j=a("util"),k=a("./negotiation_adapter"),l=a("./media_type_registry"),m=(a("./merge_recursive"),f("traverson")),n=/https?:\/\//i;c.prototype.walk=function(a){function b(){if(d.index<c.links.length&&!c.aborted)c.process(d,function(f,g){if(e=g,f)return m.debug("error while processing step "+JSON.stringify(g)),m.error(f),a(f,d,g);m.debug("successfully processed step");try{c.checkHttpStatus(g)}catch(h){return m.error("unexpected http status code"),m.error(h),a(h,d,g)}var i;try{i=c.parse(g)}catch(h){return m.error("parsing failed"),m.error(h),a(h,d,g)}var j=c.links[g.index];m.debug("next link: "+j);try{d=c.adapter.findNextStep(i,j),d.index=g.index+1}catch(h){return m.error("could not find next step"),m.error(h),a(h,d,g)}d.uri&&(d.uri=c.resolveUriTemplate(d.uri,c.templateParameters,d.index)),c.postProcessStep(d,g),m.debug("next step: "+JSON.stringify(d,null,2)),b()});else{if(!c.aborted)return m.debug("link array exhausted, calling callback"),a(null,d,e);if(m.debug("link traversal aborted"),!c.callbackHasBeenCalledAfterAbort)return m.debug("calling callback with error"),c.callbackHasBeenCalledAfterAbort=!0,a(new Error("Link traversal process has been aborted."),d,e)}}var c=this,d={uri:this.resolveUriTemplate(this.startUri,this.templateParameters,0),index:0},e=d;m.debug("starting to follow links"),b()},c.prototype.process=function(a,b){if(m.debug("processing next step ("+a.index+"): "+JSON.stringify(a,null,2)),a.uri)this.get(a,b);else{if(!a.doc)throw new Error("Can not process next step: "+JSON.stringify(a));m.debug("document for next step has already been fetched"),b(null,a)}},c.prototype.get=function(a,b){m.debug("request to "+a.uri);var c=this,d=this.requestOptions;j.isArray(this.requestOptions)&&(d=this.requestOptions[a.index]||{}),m.debug("options: "+JSON.stringify(d)),this.currentRequest=this.request.get(a.uri,d,function(d,e,f){if(m.debug("request.get returned"),d)return d.message&&"timeout of undefinedms exceeded"===d.message&&!c.callbackHasBeenCalledAfterAbort?(c.callbackHasBeenCalledAfterAbort=!0,b(new Error("Link traversal process has been aborted."))):b(d,a);if(f&&!e.body&&(e.body=f),c.contentNegotiation&&e&&e.headers&&e.headers["content-type"]){var g=e.headers["content-type"].split(/[; ]/)[0],h=l.get(g);if(!h)return b(new Error("Unknown content type for content negotiation: "+g,a));c.adapter=new h(m)}return m.debug("request to "+a.uri+" finished ("+e.statusCode+")"),a.response=e,b(null,a)}),this.registerAbortListener(b)},c.prototype.registerAbortListener=function(a){var b=this;this.currentRequest&&this.currentRequest.on("abort",function(){return m.debug("link traversal aborted"),b.callbackHasBeenCalledAfterAbort?void 0:(m.debug("calling callback with error"),b.callbackHasBeenCalledAfterAbort=!0,a(new Error("Link traversal process has been aborted.")))})},c.prototype.checkHttpStatus=function(a){if(a.response||!a.doc){var b=a.response.statusCode;if(200>b||b>=300)throw d(a.uri,b,a.response.body)}},c.prototype.parse=function(a){if(a.doc)return a.doc;try{return this.parseJson(a.response.body)}catch(b){if("SyntaxError"===b.name)throw e(a.uri,a.response.body);throw b}},c.prototype.postProcessStep=function(a,b){a.uri&&0!==a.uri.search(n)&&(this.resolveRelative&&b&&b.uri?(g.startsWith(a.uri,"/")&&g.endsWith(b.uri,"/")&&(a.uri=g.splice(a.uri,0,1)),a.uri=b.uri+a.uri):a.uri=i.resolve(this.startUri,a.uri))},c.prototype.resolveUriTemplate=function(a,b,c){if(j.isArray(b)&&(b=b[c]),b||(b={}),g.contains(a,"{")){var d=h.parse(a);return d.expand(b)}return a},c.prototype.abort=function(){m.debug("aborting link traversal"),this.aborted=!0,this.currentRequest&&(m.debug("request in progress. trying to abort it, too."),this.currentRequest.abort())},b.exports=c},{"./media_type_registry":9,"./merge_recursive":11,"./negotiation_adapter":12,minilog:1,"underscore.string":4,url:5,"url-template":21,util:2}],14:[function(_dereq_,module,exports){var isNode=!1;!function(exports,_dereq_){function push(a,b){return a=a.slice(),a.push(b),a}function unshift(a,b){return b=b.slice(),b.unshift(a),b}function jsonPath(a,b,c){var d={resultType:c&&c.resultType||"VALUE",flatten:c&&c.flatten||!1,wrap:c&&c.hasOwnProperty("wrap")?c.wrap:!0,sandbox:c&&c.sandbox?c.sandbox:{},normalize:function(a){if(cache[a])return cache[a];var b=[],c=a.replace(/[\['](\??\(.*?\))[\]']/g,function(a,c){return"[#"+(b.push(c)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/(;)?(\^+)(;)?/g,function(a,b,c){return";"+c.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),d=c.split(";").map(function(a){var c=a.match(/#([0-9]+)/);return c&&c[1]?b[c[1]]:a});return cache[a]=d},asPath:function(a){for(var b=a,c="$",d=1,e=b.length;e>d;d++)c+=/^[0-9*]+$/.test(b[d])?"["+b[d]+"]":"['"+b[d]+"']";return c},trace:function(a,b,c){function e(a){h=h.concat(a)}if(!a.length)return[{path:c,value:b}];var f=a[0],g=a.slice(1);if("^"===f)return c.length?[{path:c.slice(0,-1),expr:g,isParentSelector:!0}]:[];var h=[];if(b&&b.hasOwnProperty(f))e(d.trace(g,b[f],push(c,f)));else if("*"===f)d.walk(f,g,b,c,function(a,b,c,f,g){e(d.trace(unshift(a,c),f,g))});else if(".."===f)e(d.trace(g,b,c)),d.walk(f,g,b,c,function(a,b,c,f,g){"object"==typeof f[a]&&e(d.trace(unshift("..",c),f[a],push(g,a)))});else if("("===f[0])e(d.trace(unshift(d.eval(f,b,c[c.length],c),g),b,c));else if(0===f.indexOf("?("))d.walk(f,g,b,c,function(a,b,f,g,h){d.eval(b.replace(/^\?\((.*?)\)$/,"$1"),g[a],a,c)&&e(d.trace(unshift(a,f),g,h))});else if(f.indexOf(",")>-1)for(var i=f.split(","),j=0;j<i.length;j++)e(d.trace(unshift(i[j],g),b,c));else/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(f)&&e(d.slice(f,g,b,c));return h.reduce(function(a,c){return a.concat(c.isParentSelector?d.trace(c.expr,b,c.path):[c])},[])},walk:function(a,b,c,d,e){if(Array.isArray(c))for(var f=0,g=c.length;g>f;f++)e(f,a,b,c,d);else if("object"==typeof c)for(var h in c)c.hasOwnProperty(h)&&e(h,a,b,c,d)},slice:function(a,b,c,e){if(Array.isArray(c)){var f=c.length,g=a.split(":"),h=g[0]&&parseInt(g[0])||0,i=g[1]&&parseInt(g[1])||f,j=g[2]&&parseInt(g[2])||1;h=0>h?Math.max(0,h+f):Math.min(f,h),i=0>i?Math.max(0,i+f):Math.min(f,i);for(var k=[],l=h;i>l;l+=j)k=k.concat(d.trace(unshift(l,b),c,e));return k}},eval:function(a,b,c,f){if(!e||!b)return!1;a.indexOf("@path")>-1&&(d.sandbox._path=d.asPath(f.concat([c])),a=a.replace(/@path/g,"_path")),a.indexOf("@")>-1&&(d.sandbox._v=b,a=a.replace(/@/g,"_v"));try{return vm.runInNewContext(a,d.sandbox)}catch(g){throw console.log(g),new Error("jsonPath: "+g.message+": "+a)}}},e=a,f=d.resultType.toLowerCase();if(b&&a&&("value"==f||"path"==f)){var g=d.normalize(b);"$"===g[0]&&g.length>1&&g.shift();var h=d.trace(g,a,["$"]);return h=h.filter(function(a){return a&&!a.isParentSelector}),h.length?1!==h.length||d.wrap||Array.isArray(h[0].value)?h.reduce(function(a,b){var c=b[f];return"path"===f&&(c=d.asPath(c)),d.flatten&&Array.isArray(c)?a=a.concat(c):a.push(c),a},[]):h[0][f]||!1:d.wrap?[]:!1}}Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var isNode="undefined"!=typeof module&&!!module.exports,vm=isNode?_dereq_("vm"):{runInNewContext:function(expr,context){with(context)return eval(expr)}};exports.eval=jsonPath;var cache={}}("undefined"==typeof exports?this.jsonPath={}:exports,"undefined"==typeof _dereq_?null:_dereq_)},{vm:15}],15:[function(_dereq_,module,exports){function Context(){}var indexOf=_dereq_("indexof"),Object_keys=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)b.push(c);return b},forEach=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,b,c){Object.defineProperty(a,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}}catch(a){return function(a,b,c){a[b]=c}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(a){return this instanceof Script?void(this.code=a):new Script(a)};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={}),b.style.display="none",document.body.appendChild(b);var c=b.contentWindow,d=c.eval,e=c.execScript;!d&&e&&(e.call(c,"null"),d=c.eval),forEach(Object_keys(a),function(b){c[b]=a[b]}),forEach(globals,function(b){a[b]&&(c[b]=a[b])});var f=Object_keys(c),g=d.call(c,this.code);return forEach(Object_keys(c),function(b){(b in a||-1===indexOf(f,b))&&(a[b]=c[b])}),forEach(globals,function(b){b in a||defineProp(a,b,c[b])}),document.body.removeChild(b),g},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var b=Script.createContext(a),c=this.runInContext(b);return forEach(Object_keys(b),function(c){a[c]=b[c]}),c},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(b){var c=Script(b);return c[a].apply(c,[].slice.call(arguments,1))}}),exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var b=new Context;return"object"==typeof a&&forEach(Object_keys(a),function(c){b[c]=a[c]}),b}},{indexof:16}],16:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],17:[function(a,b,c){void function(a,d){"function"==typeof define&&define.amd?define(d):"object"==typeof c?b.exports=d():a.resolveUrl=d()}(this,function(){function a(){var a=arguments.length;if(0===a)throw new Error("resolveUrl requires at least one argument; got none.");var b=document.createElement("base");if(b.href=arguments[0],1===a)return b.href;var c=document.getElementsByTagName("head")[0];c.insertBefore(b,c.firstChild);for(var d,e=document.createElement("a"),f=1;a>f;f++)e.href=arguments[f],d=e.href,b.href=d;return c.removeChild(b),d}return a})},{}],18:[function(a,b){function c(){}function d(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function e(){if(q.XMLHttpRequest&&("file:"!=q.location.protocol||!q.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1}function f(a){return a===Object(a)}function g(a){if(!f(a))return a;var b=[];for(var c in a)null!=a[c]&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function h(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;g>f;++f)c=e[f],b=c.split("="),d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return d}function i(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;i>h;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=r(c.slice(b+1)),g[d]=e;return g}function j(a){return a.split(/ *; */).shift()}function k(a){return p(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function l(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=i(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function m(a,b){var c=this;o.call(this),this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new l(c)}catch(d){a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=d}c.callback(a,b)})}function n(a,b){return"function"==typeof b?new m("GET",a).end(b):1==arguments.length?new m("GET",a):new m(a,b)}var o=a("emitter"),p=a("reduce"),q="undefined"==typeof window?this:window,r="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};n.serializeObject=g,n.parseString=h,n.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},n.serialize={"application/x-www-form-urlencoded":g,"application/json":JSON.stringify},n.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},l.prototype.get=function(a){return this.header[a.toLowerCase()]},l.prototype.setHeaderProperties=function(){var a=this.header["content-type"]||"";this.type=j(a);var b=k(a);for(var c in b)this[c]=b[c]},l.prototype.parseBody=function(a){var b=n.parse[this.type];return b&&a&&a.length?b(a):null},l.prototype.setStatusProperties=function(a){var b=a/100|0;this.status=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=4==b||5==b?this.toError():!1,this.accepted=202==a,this.noContent=204==a||1223==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},l.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},n.Response=l,o(m.prototype),m.prototype.use=function(a){return a(this),this},m.prototype.timeout=function(a){return this._timeout=a,this},m.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},m.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},m.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},m.prototype.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},m.prototype.getHeader=function(a){return this._header[a.toLowerCase()]},m.prototype.type=function(a){return this.set("Content-Type",n.types[a]||a),this},m.prototype.accept=function(a){return this.set("Accept",n.types[a]||a),this},m.prototype.auth=function(a,b){var c=btoa(a+":"+b);return this.set("Authorization","Basic "+c),this},m.prototype.query=function(a){return"string"!=typeof a&&(a=g(a)),a&&this._query.push(a),this},m.prototype.field=function(a,b){return this._formData||(this._formData=new FormData),this._formData.append(a,b),this},m.prototype.attach=function(a,b,c){return this._formData||(this._formData=new FormData),this._formData.append(a,b,c),this},m.prototype.send=function(a){var b=f(a),c=this.getHeader("Content-Type");if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==c?this._data?this._data+"&"+a:a:(this._data||"")+a):this._data=a;return b?(c||this.type("json"),this):this},m.prototype.callback=function(a,b){var c=this._callback;return this.clearTimeout(),2==c.length?c(a,b):a?this.emit("error",a):void c(b)},m.prototype.crossDomainError=function(){var a=new Error("Origin is not allowed by Access-Control-Allow-Origin");a.crossDomain=!0,this.callback(a)},m.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},m.prototype.withCredentials=function(){return this._withCredentials=!0,this},m.prototype.end=function(a){var b=this,f=this.xhr=e(),g=this._query.join("&"),h=this._timeout,i=this._formData||this._data;if(this._callback=a||c,f.onreadystatechange=function(){return 4==f.readyState?0==f.status?b.aborted?b.timeoutError():b.crossDomainError():void b.emit("end"):void 0},f.upload&&(f.upload.onprogress=function(a){a.percent=a.loaded/a.total*100,b.emit("progress",a)}),h&&!this._timer&&(this._timer=setTimeout(function(){b.abort()},h)),g&&(g=n.serializeObject(g),this.url+=~this.url.indexOf("?")?"&"+g:"?"+g),f.open(this.method,this.url,!0),this._withCredentials&&(f.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof i&&!d(i)){var j=n.serialize[this.getHeader("Content-Type")];j&&(i=j(i))}for(var k in this.header)null!=this.header[k]&&f.setRequestHeader(k,this.header[k]);return this.emit("request",this),f.send(i),this},n.Request=m,n.get=function(a,b,c){var d=n("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},n.head=function(a,b,c){var d=n("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.del=function(a,b){var c=n("DELETE",a);return b&&c.end(b),c},n.patch=function(a,b,c){var d=n("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.post=function(a,b,c){var d=n("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.put=function(a,b,c){var d=n("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},b.exports=n},{emitter:19,reduce:20}],19:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],20:[function(a,b){b.exports=function(a,b,c){for(var d=0,e=a.length,f=3==arguments.length?c:a[d++];e>d;)f=b.call(null,f,a[d],++d,a);return f}},{}],21:[function(a,b,c){!function(a,d){"object"==typeof c?b.exports=d():"function"==typeof define&&define.amd?define([],d):a.urltemplate=d()}(this,function(){function a(){}return a.prototype.encodeReserved=function(a){return a.split(/(%[0-9A-Fa-f]{2})/g).map(function(a){return/%[0-9A-Fa-f]/.test(a)||(a=encodeURI(a)),a}).join("")},a.prototype.encodeValue=function(a,b,c){return b="+"===a||"#"===a?this.encodeReserved(b):encodeURIComponent(b),c?encodeURIComponent(c)+"="+b:b},a.prototype.isDefined=function(a){return void 0!==a&&null!==a
},a.prototype.isKeyOperator=function(a){return";"===a||"&"===a||"?"===a},a.prototype.getValues=function(a,b,c,d){var e=a[c],f=[];if(this.isDefined(e)&&""!==e)if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)e=e.toString(),d&&"*"!==d&&(e=e.substring(0,parseInt(d,10))),f.push(this.encodeValue(b,e,this.isKeyOperator(b)?c:null));else if("*"===d)Array.isArray(e)?e.filter(this.isDefined).forEach(function(a){f.push(this.encodeValue(b,a,this.isKeyOperator(b)?c:null))},this):Object.keys(e).forEach(function(a){this.isDefined(e[a])&&f.push(this.encodeValue(b,e[a],a))},this);else{var g=[];Array.isArray(e)?e.filter(this.isDefined).forEach(function(a){g.push(this.encodeValue(b,a))},this):Object.keys(e).forEach(function(a){this.isDefined(e[a])&&(g.push(encodeURIComponent(a)),g.push(this.encodeValue(b,e[a].toString())))},this),this.isKeyOperator(b)?f.push(encodeURIComponent(c)+"="+g.join(",")):0!==g.length&&f.push(g.join(","))}else";"===b?f.push(encodeURIComponent(c)):""!==e||"&"!==b&&"?"!==b?""===e&&f.push(""):f.push(encodeURIComponent(c)+"=");return f},a.prototype.parse=function(a){var b=this,c=["+","#",".","/",";","?","&"];return{expand:function(d){return a.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(a,e,f){if(e){var g=null,h=[];if(-1!==c.indexOf(e.charAt(0))&&(g=e.charAt(0),e=e.substr(1)),e.split(/,/g).forEach(function(a){var c=/([^:\*]*)(?::(\d+)|(\*))?/.exec(a);h.push.apply(h,b.getValues(d,g,c[1],c[2]||c[3]))}),g&&"+"!==g){var i=",";return"?"===g?i="&":"#"!==g&&(i=g),(0!==h.length?g:"")+h.join(i)}return h.join(",")}return b.encodeReserved(f)})}}},new a})},{}],22:[function(a,b,c){"use strict";var d=(a("minilog"),a("./lib/media_types")),e=a("./lib/builder"),d=a("./lib/media_types"),f=a("./lib/media_type_registry");c._Builder=e,c.newRequest=function(){return new e},c.from=function(a){var b=new e;return b.from(a),b},c.json={from:function(a){var b=new e;return b.from(a),b.setMediaType(d.JSON),b}},c.jsonHal={from:function(a){if(!f.get(d.JSON_HAL))throw new Error("JSON HAL adapter is not registered. From version 1.0.0 on, Traverson has no longer built-in support for application/hal+json. HAL support was moved to a separate, optional plug-in. See https://github.com/basti1302/traverson-hal");var b=new e;return b.from(a),b.setMediaType(d.JSON_HAL),b}},c.registerMediaType=f.register,c.mediaTypes=d},{"./lib/builder":6,"./lib/media_type_registry":9,"./lib/media_types":10,minilog:1}]},{},[22])(22)});